/*
  Fresh redesign for todo list — glassmorphism + polished controls
  - Modern card layout
  - Responsive typography and sizing
  - Accessible focus-visible and reduced-motion support
  - Subtle interactions and improved empty state + toolbar visuals
*/

:root{
  /* Colors */
  --bg-1: #071126;
  --bg-2: #0b1221;
  --glass: rgba(255,255,255,0.06);
  --accent: #7c5cff;
  --accent-2: #ff7aa2;
  --muted: #94a3b8;
  --card: rgba(255,255,255,0.98);
  --card-text: #0b1221;
  /* UI text on controls (select, placeholders) */
  --control-text: #ffffff;
  /* theme-aware text tokens */
  --text-primary: #ffffff;
  --text-muted: rgba(255,255,255,0.85);
  --button-text: #ffffff;
  --border-weak: rgba(255,255,255,0.06);
  --panel-overlay: rgba(255,255,255,0.03);
  --success: #22c55e;

  /* surface tokens */
  --panel-overlay-2: rgba(255,255,255,0.01);
  --input-bg: linear-gradient(180deg, rgba(255,255,255,0.97), rgba(255,255,255,0.96));
  --card-bg: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));

  /* spacing */
  --space-xs: 0.4rem;
  --space-sm: 0.75rem;
  --space-md: 1.25rem;
  --space-lg: 2rem;
  --radius-lg: 1rem;
  --radius-sm: 0.5rem;

  /* motion */
  --dur-xs: 120ms;
  --dur-sm: 220ms;
  --shadow: 0 10px 30px rgba(2,6,23,0.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: linear-gradient(180deg,var(--bg-1), var(--bg-2)), url('pencil.jpeg') center/cover no-repeat;
  color:var(--text-primary);
  display:flex;align-items:center;justify-content:center;padding:3rem 1rem;
}

/* Light theme overrides */
.theme-light{
  --bg-1: #f6f7fb;
  --bg-2: #eef2f7;
  --glass: rgba(2,6,23,0.04);
  --accent: #6b46ff;
  --accent-2: #ff6b96;
  --muted: #475569;
  --card: #ffffff;
  --card-text: #0b1221;
  --control-text: #0b1221;
  --text-primary: #0b1221;
  --text-muted: #475569;
  --button-text: #ffffff;
  --border-weak: rgba(2,6,23,0.06);
  --panel-overlay: rgba(2,6,23,0.03);
  --panel-overlay-2: rgba(2,6,23,0.01);
  --input-bg: linear-gradient(180deg, #ffffff, #fbfbfb);
  --card-bg: linear-gradient(180deg, #ffffff, #fbfbfb);
  --shadow: 0 8px 24px rgba(2,6,23,0.06);
}

/* Root wrapper (place this on a parent wrapper in HTML) */
.todo-container-root{
  width:100%;
  max-width:900px;
  background:var(--panel-overlay);
  border-radius:calc(var(--radius-lg) + 0.5rem);
  padding:2.25rem;
  box-shadow:var(--shadow);
  backdrop-filter: blur(8px) saturate(1.05);
  border:1px solid var(--border-weak);

  /* ensure children stack vertically */
  display:flex;
  flex-direction:column;
  align-items:stretch;
  gap:var(--space-md);
}

header{display:flex;align-items:center;justify-content:space-between;gap:1rem;width:100%}
header h1{font-size:clamp(1.2rem,1.2rem + 1vw,2rem);margin:0;color:var(--text-primary)}
header .brand-sub{font-size:0.85rem;color:var(--muted)}

.header-actions{display:flex;align-items:center;gap:0.5rem}
.theme-toggle{background:transparent;border:1px solid var(--border-weak);color:var(--control-text);padding:0.4rem 0.6rem;border-radius:0.5rem;cursor:pointer}
.theme-toggle:hover{background:var(--panel-overlay)}

.todo-form{display:flex;gap:0.6rem;margin-top:1rem;align-items:center;width:100%;flex-wrap:wrap}
.todo-input{flex:1;padding:0.9rem 1rem;border-radius:999px;border:0;background:var(--input-bg);color:var(--card-text);font-size:clamp(0.95rem,0.9rem + 0.3vw,1.05rem);box-shadow:0 6px 22px rgba(2,6,23,0.12)}
.todo-input::placeholder{color:var(--text-muted)}
.todo-button{display:inline-flex;align-items:center;justify-content:center;padding:0.7rem 0.9rem;border-radius:999px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:var(--button-text);cursor:pointer;box-shadow:0 6px 18px rgba(124,92,255,0.18);transition:transform var(--dur-xs) ease,box-shadow var(--dur-xs) ease}
.todo-button:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 14px 34px rgba(124,92,255,0.22)}
.todo-button:active{transform:translateY(-1px) scale(0.98)}
/* Priority select next to the input */
.priority-select{border-radius:999px;padding:0.55rem 0.8rem;border:1px solid var(--border-weak);background:transparent;color:var(--control-text);cursor:pointer}
.priority-select option{color:var(--text-primary)}
/* color hints for the priority select control */
.priority-select.priority-low{color:#16a34a;background:transparent}
.priority-select.priority-medium{color:#d97706;background:transparent}
.priority-select.priority-high{color:#dc2626;background:transparent}

/* option color appearance — note: many UAs limit option styling; this helps in supporting browsers */
.priority-select option[value="low"]{color:#16a34a}
.priority-select option[value="medium"]{color:#d97706}
.priority-select option[value="high"]{color:#dc2626}

.select{position:relative}
/* theme-aware select text color */
.select.filter-todo{
  color:var(--control-text);
  background:transparent;
  border:1px solid var(--border-weak);
}
.select::after{content:"\25BE";position:absolute;right:0.6rem;top:50%;transform:translateY(-50%);color:var(--control-text)}

.toolbar{display:flex;align-items:center;justify-content:space-between;margin-top:1rem;width:100%;flex-wrap:wrap}
.task-count{color:var(--text-muted)}
.toolbar-actions{display:flex;gap:0.5rem}
.toolbar-actions button{background:transparent;border:1px solid var(--border-weak);color:var(--control-text);padding:0.45rem 0.6rem;border-radius:0.5rem;cursor:pointer;transition:transform 140ms ease,box-shadow 140ms ease,background 120ms ease}
.toolbar-actions button:hover{background:var(--panel-overlay);transform:translateY(-2px);box-shadow:0 10px 24px rgba(2,6,23,0.06)}
.toolbar-actions button:active{transform:translateY(0) scale(0.98)}

.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.25rem;margin-top:1rem;border-radius:var(--radius-lg);background:linear-gradient(180deg, var(--panel-overlay), var(--panel-overlay-2));border:1px dashed var(--border-weak)}

/* ensure the element hides when the [hidden] attribute is present */
.empty-state[hidden]{display:none}
.empty-title{font-weight:600;margin:0 0 0.25rem 0}
.empty-desc{margin:0;color:var(--muted);font-size:0.95rem}

.todo-list{list-style:none;padding:0;margin:1rem 0 0 0;display:flex;flex-direction:column;gap:0.6rem;width:100%}
.todo{display:flex;align-items:center;gap:0.6rem;padding:0.75rem;border-radius:0.75rem;background:var(--card-bg);color:var(--card-text);box-shadow:0 8px 22px rgba(2,6,23,0.08);transition:transform var(--dur-sm) ease,box-shadow var(--dur-sm) ease}
.todo:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(2,6,23,0.12)}
.todo-item{flex:1;padding-left:0.5rem}
.priority-indicator{width:10px;height:10px;border-radius:50%;flex:0 0 auto;margin-right:0.5rem;border:1px solid rgba(0,0,0,0.06)}
.priority-low{background:#22c55e}
.priority-medium{background:#f59e0b}
.priority-high{background:#ef4444}
.todo-item{
  /* allow wrapping and breaking long words */
  overflow-wrap: anywhere;
  white-space: normal;
}
.todo .btn-group{display:flex;gap:0.35rem}
.complete-btn,.trash-btn{border:0;padding:0.45rem 0.6rem;border-radius:0.5rem;cursor:pointer}
.complete-btn{background:linear-gradient(90deg,var(--success), #7ee787);color:var(--button-text)}
.trash-btn{background:transparent;border:1px solid rgba(2,6,23,0.04);color:var(--muted)}
.complete-btn:hover{transform:scale(1.04)}
.complete-btn:active,.trash-btn:active{transform:scale(0.98)}

/* edit input inside a todo */
.todo-edit-input{flex:1;padding:0.5rem 0.6rem;border-radius:0.5rem;border:1px solid var(--border-weak);background:var(--input-bg);color:var(--card-text);font-size:1rem}

/* dragging visual */
.todo.dragging{opacity:0.6;transform:scale(0.995);box-shadow:0 6px 18px rgba(2,6,23,0.08)}
.todo-list .todo{cursor:grab}
.todo-list .todo:active{cursor:grabbing}

/* drag handle */
.drag-handle{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:6px;margin-right:0.45rem;color:var(--muted);cursor:grab}
.drag-handle i{font-size:14px}
.drag-handle:active{cursor:grabbing}
.todo .drag-handle:hover{background:var(--panel-overlay)}
.completed .todo-item{opacity:0.6;text-decoration:line-through}

/* quick removal feedback */
.todo.removing{transform:translateX(0.6rem) scale(0.98);opacity:0;transition:transform 140ms ease,opacity 140ms ease}
.todo.slide{transform:translateX(10rem);opacity:0;transition:transform var(--dur-default,200ms) ease,opacity 200ms ease}

/* entry animation: start slightly translated and transparent, then transition to place */
.todo.enter{opacity:0;transform:translateY(-6px) scale(0.995);}
.todo{transition:transform var(--dur-sm) ease,box-shadow var(--dur-sm) ease,opacity var(--dur-sm) ease}

/* progress bar */
.progress-wrap{width:100%;height:8px;border-radius:99px;background:linear-gradient(90deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));overflow:hidden;margin-bottom:0.65rem}
.progress-bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width 300ms ease}

/* Reduced-size helpers for long todos */
.todo-item--small{font-size:0.92rem;padding-left:0.4rem}
.todo-item--xsmall{font-size:0.82rem;padding-left:0.3rem}
.todo--condensed{padding:0.5rem}

@media (max-width:640px){
  .todo-container-root{padding:1rem}
  body{padding:2rem 0.5rem}
  .toolbar{flex-direction:column;align-items:flex-start;gap:0.6rem}
  .todo-button{padding:0.55rem}
  /* stack header items on narrow screens */
  header{flex-direction:column;align-items:flex-start;gap:0.5rem}
  .todo-form{gap:0.5rem}
}

/* Extra mobile polish for visibility and touch targets */
@media (max-width:640px){
  .todo-input{font-size:1rem;padding:0.8rem 1rem}
  .priority-select{padding:0.5rem 0.7rem;font-size:0.95rem;border-radius:0.6rem}
  .todo-button{padding:0.6rem 0.9rem;border-radius:0.75rem;font-size:1rem}

  .toolbar{flex-direction:column;align-items:stretch}
  .task-count{width:100%;margin-top:0.25rem}
  .toolbar-actions{width:100%;display:flex;justify-content:space-between}

  .progress-wrap{height:6px;margin-bottom:0.5rem}

  .todo{padding:0.6rem;border-radius:0.6rem;gap:0.5rem}
  .todo-item{font-size:0.98rem}
  .priority-indicator{width:12px;height:12px;margin-right:0.5rem}

  /* slightly larger hit targets for action buttons */
  .btn-group button{padding:0.5rem 0.65rem}
  .complete-btn,.trash-btn{padding:0.48rem 0.6rem}

  /* make drag handle slightly smaller and more touch-friendly */
  .drag-handle{width:28px;height:28px;margin-right:0.4rem}

  /* Increase spacing between todos for touch
     and ensure list uses full width */
  .todo-list{gap:0.7rem}
  .todo-container-root{padding:0.9rem}

  /* ensure empty-state text is readable */
  .empty-title{font-size:1.05rem}
  .empty-desc{font-size:0.95rem}
}

:focus{outline:none}
:focus-visible{outline:4px solid rgba(124,92,255,0.18);outline-offset:3px}
@media (prefers-reduced-motion:reduce){*{transition:none!important}}

@media print{body{background:#fff;color:#000}.todo-container-root{box-shadow:none;border:0;background:transparent}.todo-button,.toolbar-actions{display:none}}

